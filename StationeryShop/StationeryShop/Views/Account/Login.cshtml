
@{
	ViewBag.Title = "Login";
	Layout = "~/Views/Shared/_LayoutWithoutSidebar.cshtml";
}

<div class="login-form" id="login">
	<div class="container">
		<h1>ĐĂNG NHẬP</h1>
		<div class="row">
			<div class="col-12 col-md-6">
				<div class="alert alert-danger d-none" id="err">
					Thông tin tài khoản mật khẩu không chính xác!
				</div>
				<form>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-envelope bx-sm"></i>
						</span>
						<input type="text"
									 class="form-control"
									 name="email"
									 id="email"
									 placeholder="Nhập email..."
									 required />
					</div>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-key bx-sm"></i>
						</span>
						<input type="password"
									 id="password"
									 class="form-control"
									 name="password"
									 placeholder="Nhập mật khẩu..."
									 required />
					</div>
					<button type="submit" class="btn btn-primary mb-2">
						<i class="bx bx-lock-open text-white"></i>
						Đăng nhập
					</button>
				</form>
			</div>
			<div class="col-12 col-md-6">
				<p class="text-center mt-2">Đăng nhập bằng tài khoản mạng xã hội</p>
				<div class="btn-login-group">
					<a href="#" class="btn btn-login btn-login-facebook mb-3">
						<i class="bx bxl-facebook bx-sm"></i>
						Đăng nhập với Facebook
					</a>
					<a href="#" class="btn btn-login btn-login-google mb-3">
						<i class="bx bxl-google bx-sm"></i>
						Đăng nhập với Google
					</a>
				</div>
			</div>
		</div>
		<p class="mt-2 mb-0">
			<a href="/Account/Forget">Quên mật khẩu </a>|
			<a href="/Account/Register">Đăng ký</a>
		</p>
	</div>
</div>

<script>
	document.querySelector("#login").addEventListener("submit", async e => {
		e.preventDefault();
		const data = await (await fetch("/Account/DoLogin", { method: "post", body:new FormData(e.target) })).json();
		if (data.success) {
			location.href = "/";
		} else {
			document.querySelector("#err").classList.remove("d-none");
		}
	});
</script>

