
@{
	ViewBag.Title = "Register";
	Layout = "~/Views/Shared/_LayoutWithoutSidebar.cshtml";
}

<div class="login-form">
	<div class="container">
		<h1>ĐĂNG KÝ</h1>
		<div class="row">
			<div class="col-12 col-md-6">
				<div id="err" class="alert alert-danger d-none">
					Email đã tồn tại! Vui lòng chọn email khác.
				</div>
				<form id="register">
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-envelope bx-sm"></i>
						</span>
						<input type="email"
									 class="form-control"
									 name="email"
									 id="email"
									 placeholder="Nhập email..."
									 required />
					</div>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-key bx-sm"></i>
						</span>
						<input type="text"
									 class="form-control"
									 name="password"
									 id="password"
									 placeholder="Nhập mật khẩu..."
									 required
									 minlength="6" />
					</div>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-user bx-sm"></i>
						</span>
						<input type="text"
									 class="form-control"
									 name="name"
									 placeholder="Nhập họ tên..."
									 required />
					</div>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-phone bx-sm"></i>
						</span>
						<input type="tel"
									 class="form-control"
									 name="tel"
									 id="tel"
									 placeholder="Nhập số điện thoại..."/>
					</div>
					<div class="input-group mb-3">
						<span class="input-group-text">
							<i class="bx bx-home bx-sm"></i>
						</span>
						<input type="text"
									 class="form-control"
									 name="address"
									 placeholder="Nhập địa chỉ..."/>
					</div>
					<button type="submit" class="btn btn-primary mb-2">
						<i class="bx bx-lock-open text-white"></i>
						Đăng ký
					</button>
				</form>
			</div>
			<div class="col-12 col-md-6">
				<p class="text-center">Đăng nhập bằng tài khoản mạng xã hội</p>
				<div class="btn-login-group">
					<a href="#" class="btn btn-login btn-login-facebook mb-3">
						<i class="bx bxl-facebook bx-sm"></i>
						Đăng nhập với Facebook
					</a>
					<a href="#" class="btn btn-login btn-login-google mb-3">
						<i class="bx bxl-google bx-sm"></i>
						Đăng nhập với Google
					</a>
				</div>
			</div>
		</div>
		<p class="mt-2 mb-0">
			Đã có tài khoản?
			<a href="/Account/Login">Đăng nhập</a>
		</p>
	</div>
</div>

<script>
	document.querySelector("#register").addEventListener("submit", async e => {
		e.preventDefault();
		const data = await (await fetch("/Account/DoRegister", { method: "post", body:new FormData(e.target) })).json();
		if (data.success) {
			location.href = "/Account/Login";
		} else {
			document.querySelector("#err").classList.remove("d-none");
		}
	})
</script>
